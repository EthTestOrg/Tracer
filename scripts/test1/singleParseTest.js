const { ethers } = require("ethers");

const ABI = (require("../../artifacts/contracts/Greeter.sol/Greeter.json")).abi;

// Data from tryethernal website
const myObject = {
    op: 'STATICCALL',
    address: '0x000000000000000000636f6e736f6c652e6c6f67',
    input: '0x2ced7cef000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000234368616e67696e67206772656574696e672066726f6d202725732720746f2027257327000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000056f6b69656500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000076c61616161616100000000000000000000000000000000000000000000000000',
    returnData: '',
    depth: 1,
    contractHashedBytecode: '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470',
    contract: {
      address: '0x000000000000000000636f6e736f6c652e6c6f67',
      hashedBytecode: '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470'
    }
}

// copied from 
// const myObject = {
//     op: 'STATICCALL',
//     address: '0x000000000000000000636f6e736f6c652e6c6f67',
//     input: '0x2ced7cef000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000234368616e67696e67206772656574696e672066726f6d202725732720746f20272573270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f48656c6c6f2c2048617264686174210000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c486f6c612c206d756e646f210000000000000000000000000000000000000000',
//     returnData: '',
//     depth: 1,
//     contractHashedBytecode: '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470',
//     contract: {
//       address: '0x000000000000000000636f6e736f6c652e6c6f67',
//       hashedBytecode: '0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470'
//     }
// }

const tx = {
    hash: '0x45109a1bce38515183d53bb2d4db32240674ff499e5c54568884d941022b4a63',
    type: 2,
    accessList: [],
    blockHash: '0xcf3feab2c8ea71aaebf435e30952cca2b69a48620ed5d2fed2527dd3402a783c',
    blockNumber: 3,
    transactionIndex: 0,
    confirmations: 1,
    from: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
    gasPrice: "1673227624",
    maxPriorityFeePerGas: "1000000000",
    maxFeePerGas: "2346455248",
    gasLimit: "29022552" ,
    to: '0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512',
    value: 0,
    nonce: 2,
    data: '0xa41368620000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000c486f6c612c206d756e646f210000000000000000000000000000000000000000',
    r: '0x7cda28d3c2cc663a9d9485b604751940f115ff9757e59ed5012e0f84b77d1e09',
    s: '0x1733a959b93383b8b3e21db2f3863061c493e8f8d90f97fb153cfdc854efc755',
    v: 1,
    creates: null,
    chainId: 31337,
  }
  const zeroXify = function(input) { return input.startsWith('0x') ? input : `0x${input}` };
  console.log(myObject.input === zeroXify(myObject.input));
const jsonInterface = new ethers.utils.Interface(ABI);
// console.log({ data: myObject.input });
const transactionDescription = jsonInterface.parseTransaction({ data: myObject.input });
console.log(transactionDescription);
// const transactionDescription = jsonInterface.parseTransaction({ data: tx.data });
// const transactionDescription = jsonInterface.parseLog(myObject);
// console.log(transactionDescription);

// console.log(jsonInterface.decodeFunctionData(transactionDescription.sighash, myObject.input));